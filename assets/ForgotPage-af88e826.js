import{P as p,d as F,u as w,r as l,j as s,e as P,Q as S,h as T,F as f}from"./index-aaba122c.js";import{F as E,a as $,T as V,L as R,E as I,b as O,c as q,I as B,d as D,S as L,e as W}from"./AuthForms.styled-9cc66c19.js";import{r as v}from"./clusterSchema-49603d33.js";const m={newPass:"",confirmPass:""},h=({id:t,pwdToken:n})=>{const o=F(),u=w(),[i,x]=l.useState("password"),j=({values:r,errors:a,key:e})=>{const d=!r[e]&&"noValue",c=a[e]?"error":"success";return d||c},g=({errors:r,values:a})=>{const e=Object.keys(r).length;return Object.keys(a).some(c=>!a[c])||e},b=r=>{u(P({...r,id:t,pwdToken:n})).unwrap().then(()=>o("/signin",{replace:!0})).catch(a=>S.error(a.message))};return s.jsx(E,{initialValues:m,validationSchema:v,onSubmit:b,children:({values:r,errors:a})=>s.jsxs($,{children:[s.jsx(V,{children:s.jsx("h2",{children:"Reset password"})}),Object.keys(m).map(e=>s.jsxs(l.Fragment,{children:[s.jsxs(R,{children:[e.at(0).toUpperCase()+e.replace("Pass"," password").substring(1),s.jsx("pre",{children:" "}),s.jsx(I,{name:e,component:"span"})]}),s.jsxs(O,{children:[s.jsx(q,{type:i,name:e,$validation:j({values:r,errors:a,key:e})}),s.jsx(B,{toggle:i,setToggle:x}),r[e]&&a[e]&&s.jsx(D,{}),r[e]&&!a[e]&&s.jsx(L,{})]})]},e)),s.jsx(W,{disabled:g({values:r,errors:a}),children:"Submit"})]})})};h.propTypes={id:p.string.isRequired,pwdToken:p.string.isRequired};const Q=()=>{const[t]=T(),n=t.get("id"),o=t.get("pwd_token");return s.jsx(f,{$w:"400px",$h:"100vh",$p:"0",$d:"flex",$fd:"column",$jc:"center",children:s.jsx(h,{id:n,pwdToken:o})})};export{Q as default};
